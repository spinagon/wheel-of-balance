<!DOCTYPE html>
<html lang="en-US">

<head>
    <title>Wheel of balance</title>
    <script src="./node_modules/wheel-of-balance/dist/index.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.1.2/chroma.min.js"></script>
</head>

<body>
    <canvas id="canvas" width="500" height="500"></canvas>
    <button id="clear">Clear</button>
    <button id="download">Download</button>

    <!-- Input for number of sections -->
    <input id="numSections" type="number" placeholder="Number of sections" value="8">
    <!-- Input for section names -->
    <textarea id="sectionNames" placeholder="Enter section names, separated by commas" rows=8></textarea>
    <button id="updateConfig">Update Config</button>
</body>

<script>

    var config = {};

    config.radius = 200;
    config.levels = 10;
    config.fontSize = 25;

    // Function to update the config based on user input
    function updateConfig() {
        const numSections = document.getElementById("numSections").value;
        const sectionNames = document.getElementById("sectionNames").value.split(",");

        config.segments = [];

        for (let i = 0; i < numSections; i++) {
            config.segments.push({
                color: getContrastColor(i, numSections), // Random color for each section
                text: sectionNames[i] || `Section ${i + 1}`, // Use provided name or default
                level: config.levels
            });
        }

        // Reinitialize the wheel with the new config
        wheel = new Wheel(canvas, config);
        wheel.clear();
        wheel.draw();
    }

    function getContrastColor(index, total) {
        // Use chroma.js to generate colors with good contrast
        const hue = (360 / total) * index; // Spread hues evenly
        return chroma.hsl(hue, 0.8, 0.6).hex(); // Adjust saturation and lightness for distinct colors
    }

    let canvas = document.getElementById("canvas");

    var wheel;
    updateConfig();

    const clearButton = document.getElementById("clear");
    clearButton.addEventListener('click', function (e) {
        wheel.clear();
    });

    const downloadButton = document.getElementById("download");
    downloadButton.addEventListener('click', function (e) {
        wheel.download();
    });

    const updateConfigButton = document.getElementById("updateConfig");
    updateConfigButton.addEventListener('click', function (e) {
        updateConfig();
    });

    const numSections = document.getElementById("numSections");
    numSections.addEventListener('change', function (e) {
        updateConfig();
    });

</script>

</html>
